---
title: "Project 5 - Predicting Facebook Check-Ins"
output: html_notebook
---

## Project Description

## Why did we choose this project?


## Data
The dataset ... too include(Brazil, state of Espirito Santo - Public Sector - Primary Care)
*Description of the dataset*
- Age: Age of the patient
- Gender: Gender of the patient
- AppointmentRegistration: Time and date when the patient took the appointment
- AppointmentData: Date of the appointment
- Diabetes: Is the patient affected by diabetes? (0/1)
- Alcoolism: is the patient alcoolic? (0/1)
- Hipertension: Is the patient affected by hypertension? (0/1)
- Handcap: 
- Smokes: Is the patient smoking? (0/1)
- Scholarship: Is the patient receiving a scholarship? Those scholarships are given by Bolsa Familia to low income families who accept to send their kids to school nd have them vaccinated. 
- Tuberculosis: Is the patient affected by tuberculosis? (0/1)
- AwaitingTime: How many days the patient waited between the appointment registration and the date of the appointment
- Status: Did the patient show-up or not? (No-Show/Show-Up)
*Source*

## Exploratory Data Analysis

**Step 0: Load Packages**

**Step 1: Load Dataset**
```{r}
dataset <- read.csv("../data/No-show-Issue-Comma-300k.csv")
```

**Step 2: Clean & Organize dataset**
```{r}
# Check Format
str(dataset)
```

```{r}
# Update Columns Names
colnames(dataset) <- c("age", "gender", "appointment_registration", 
                       "appointment_date", "dayofweek_apptmt", "show_up",
                       "diabetes", "alcoholism", "hypertension", "handicap", 
                       "smoker", "scholarship", "tuberculosis",
                       "sms_reminder", "daydiff_regist_appt")

# Update Columns Format
dataset$sms_reminder <- factor(dataset$sms_reminder)
dataset$diabetes <- factor(dataset$diabetes)
dataset$alcoholism <- factor(dataset$alcoholism)
dataset$hypertension <- factor(dataset$hypertension)
dataset$handicap <- factor(dataset$handicap)
dataset$smoker <- factor(dataset$smoker)
dataset$scholarship <- factor(dataset$scholarship)
dataset$tuberculosis <- factor(dataset$tuberculosis)
```

```{r}
# Check Values
summary(dataset)
```


```{r}
# Data Cleaning

# age: The Age shouldn't be negative, we will remove those rows. 
dataset <- dataset[dataset$age>0,]
# dayofweek_apptmt: We don't know if this variable is linked to the registration date or the apointment date - we will delete it and use the raw columns only
dataset$dayofweek_apptmt <- NULL
# daydiff_regist_appt: We will convert this value to be positive
dataset$daydiff_regist_appt <- -(dataset$daydiff_regist_appt)
# show-up: 
levels(dataset$show_up)
library(plyr)
dataset$show_up <- revalue(dataset$show_up, c("No-Show"=0, "Show-Up"=1))
levels(Cancer)[1]<-"1"
levels(Cancer)[2]<-"2"
# dates

```


** Step 3:
```{r}
# Number of rows
nb_rows <- nrow(dataset)

# Features available
names(dataset)

# What we will predict
# Unbalanced Classes
summary(as.factor(dataset$Status))

```

